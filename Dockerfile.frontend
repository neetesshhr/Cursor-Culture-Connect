FROM node:22-alpine

# Set working directory
WORKDIR /app

# Install global dependencies
RUN npm install -g expo-cli

# Copy package.json and package-lock.json first for better caching
COPY package*.json ./

# Install dependencies with --legacy-peer-deps to fix React Native version conflicts
RUN npm install --legacy-peer-deps

# Copy the rest of the app
COPY . .

# Expose the Expo web port
EXPOSE 19000
EXPOSE 19001
EXPOSE 19002
EXPOSE 8081
EXPOSE 8082

# Environment variables
ENV NODE_ENV=development
ENV EXPO_DEVTOOLS_LISTEN_ADDRESS=0.0.0.0
ENV REACT_NATIVE_PACKAGER_HOSTNAME=localhost

# Start the Expo development server
CMD ["npm", "start"] 